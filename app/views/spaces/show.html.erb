<%= provide(:title, @space.listing_name ) %>

<% if @space.images.count > 0 %>
  <%= image_tag @space.images[0], class:"img-fluid max-width: 100%" %>
<% end %>

<div class="col p-4 d-flex flex-column position-static">
  <strong class="d-inline-block mb-2 text-primary"><%= @space.venue_type %></strong>
  <h3 class="mb-0"><%= link_to @space.listing_name, @space %></h3>
  <div class="mb-1 text-muted"></div>
  <p class="card-text mb-auto"><%= @space.category %>: <%= @space.wall_width %> x <%= @space.wall_height %> cm (w x h)</p>
  <p class="card-text mb-auto">Price: Â£ <%= @space.price %> per day</p>
  <p class="card-text mb-auto"><%= @space.address %></p>
  <p class="card-text mb-auto"><%= @space.description %></p>

  Amenities
  <ul>
    <li class="<%= 'text-muted' if !@space.is_toilet %>">Toilet</li>
    <li class="<%= 'text-muted' if !@space.is_parking %>">Parking</li>
    <li class="<%= 'text-muted' if !@space.is_wifi %>">WiFi</li>
    <li class="<%= 'text-muted' if !@space.is_dis_acc %>">Disabled Access</li>
    <li class="<%= 'text-muted' if !@space.is_sec_sys %>">Security System</li>
    <li class="<%= 'text-muted' if !@space.is_hang_sys %>">Picture Hanging System</li>
    <li class="<%= 'text-muted' if !@space.is_adj_light %>">Adjustable Lighting</li>
    <li class="<%= 'text-muted' if !@space.is_nat_light %>">Natural Light</li>
    <li class="<%= 'text-muted' if !@space.is_plugs %>">Power Plugs</li>
    <li class="<%= 'text-muted' if !@space.is_storage %>">Storage</li>
  </ul>

  Interested in
  <ul>
    <li class="<%= 'text-muted' if !@space.is_paintings %>">Paintings</li>
    <li class="<%= 'text-muted' if !@space.is_photography %>">Photography</li>
    <li class="<%= 'text-muted' if !@space.is_drawings %>">Drawings</li>
    <li class="<%= 'text-muted' if !@space.is_sculptures %>">Sculptures</li>
    <li class="<%= 'text-muted' if !@space.is_live_perf %>">Live Performances</li>
    <li class="<%= 'text-muted' if !@space.is_adverts %>">Advertisements</li>
  </ul>

  <% if @space.images.count > 1 %>
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <% if @space.images %>
        <ol class="carousel-indicators">
          <% @space.images.each do |image| %>
            <li data-target="#carouselExampleIndicators" data-slide-to="<%= image.id %>"<%= ' class="active"' if image.id == @space.images[0].id %></li>
          <% end %>
        </ol>
      <% end %>
      <div class="carousel-inner">
        <% if @space.images %>
          <% @space.images.each do |image| %>
            <div class="carousel-item<%= ' active' if image.id == @space.images[0].id %>">
              <%= image_tag image, class:"img-fluid" %>
            </div>
          <% end %>
        <% end %>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  <% end %>

  <!-- Google Map -->
  <head>
    <title>Add Map</title>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GMAPS_API_KEY'] %>&callback=initMap&libraries=&v=weekly"
      defer
    ></script>
    <style type="text/css">
      /* Set the size of the div element that contains the map */
      #map {
        height: 400px;
        /* The height is 400 pixels */
        width: 100%;
        /* The width is the width of the web page */
      }
    </style>
    <script>
      // Initialize and add the map
      function initMap() {
        // The location of Uluru
        const uluru = { lat: <%= @space.latitude %>, lng: <%= @space.longitude %> };
        // The map, centered at Uluru
        const map = new google.maps.Map(document.getElementById("map"), {
          zoom: 14,
          center: uluru,
        });
        // The marker, positioned at Uluru
        const marker = new google.maps.Marker({
          position: uluru,
          map: map,
        });
      }
    </script>
  </head>
  <body>
    <!--The div element for the map -->
    <div id="map"></div>
  </body>
</div>
