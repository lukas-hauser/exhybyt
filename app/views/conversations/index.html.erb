<% provide(:title, 'Messages') %>
<div class="row">
	<div class="col-md-12">
		<div class="card">
			<h5 class="card-header">Your conversations</h5>
			<ul class="list-group list-group-flush">
				<% @conversations.each do |conversation| %>
					<li class="list-group-item">
						<% other = conversation.sender == current_user ? conversation.recipient : conversation.sender %>
						<%= link_to conversation_messages_path(conversation) do %>

							<div class="row conversation">
								<div class="col-md-1">
									<%= gravatar_for(other, size: 40) %>
								</div>
								<div class="col-md-2">
									<%= other.display_name %><br>
								</div>
								<div class="col-md-7">
									<%= conversation.messages.last.content %>
								</div>
								<div class="col-md-2">
									<%= conversation.messages.last.message_time %>
								</div>
							</div>
						</li>
					<% end %>
				<% end %>
			</ul>
		</div>
	</div>
</div>
